<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>2026 PTO & Boating Planner (Readable)</title>
  <style>
    :root {
      --bg: #020617;
      --bg-alt: #020617;
      --card: #020617;
      --accent: #38bdf8;
      --accent-soft: rgba(56,189,248,0.12);
      --accent-strong: rgba(56,189,248,0.3);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --danger: #f97373;
      --warning: #fbbf24;
      --success: #4ade80;
      --border: #1f2937;
      --booked: #0ea5e9;
      --suggested: #fbbf24;
      --font: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
              "Segoe UI", sans-serif;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 1.5rem;
      background: radial-gradient(circle at top, #020617 0, #020617 52%, #000 100%);
      color: var(--text);
      font-family: var(--font);
    }

    h1, h2, h3, h4 {
      margin: 0;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    h1 { font-size: 1.6rem; margin-bottom: 0.4rem; }

    p { margin: 0.2rem 0; }

    .app-shell {
      max-width: 1320px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: minmax(0, 2.3fr) minmax(320px, 1.7fr);
      gap: 1.25rem;
    }

    @media (max-width: 1050px) {
      .app-shell { grid-template-columns: 1fr; }
    }

    .card {
      background: radial-gradient(circle at top left, #020617 0, #020617 55%, #000 100%);
      border-radius: 0.9rem;
      padding: 0.9rem 1rem;
      border: 1px solid var(--border);
      box-shadow:
        0 22px 60px rgba(15,23,42,0.75),
        0 0 0 1px rgba(15,23,42,0.9);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.75rem;
      margin-bottom: 0.8rem;
    }

    .card-header-main {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.14rem 0.7rem;
      border-radius: 999px;
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      background: rgba(15,23,42,0.95);
      border: 1px solid rgba(148,163,184,0.4);
      color: var(--muted);
    }

    .pill-dot {
      width: 0.4rem;
      height: 0.4rem;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 0 4px rgba(56,189,248,0.18);
    }

    .pill-strong {
      border-color: var(--accent);
      color: #e0f2fe;
    }

    .muted { color: var(--muted); font-size: 0.8rem; }

    .controls-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.45rem;
      align-items: center;
      margin-bottom: 0.8rem;
    }

    .btn {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      background: rgba(15,23,42,0.9);
      color: var(--text);
      padding: 0.28rem 0.75rem;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      cursor: pointer;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.08s ease;
    }

    .btn span.icon { font-size: 0.95rem; }

    .btn:hover {
      border-color: rgba(148,163,184,0.9);
      background: rgba(31,41,55,0.95);
      transform: translateY(-0.5px);
    }

    .btn-primary {
      border-color: var(--accent);
      background: linear-gradient(135deg, rgba(56,189,248,0.26), rgba(129,140,248,0.28));
      box-shadow:
        0 0 0 1px rgba(56,189,248,0.35),
        0 18px 40px rgba(15,23,42,0.9);
    }

    .btn-toggle-on {
      border-color: var(--accent);
      background: rgba(56,189,248,0.18);
      color: #e0f2fe;
    }

    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      font-size: 0.76rem;
      margin-bottom: 0.9rem;
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.18rem 0.55rem;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(31,41,55,0.9);
    }

    .legend-swatch {
      width: 0.8rem;
      height: 0.8rem;
      border-radius: 0.2rem;
      border: 1px solid rgba(15,23,42,0.9);
    }

    .swatch-booked { background: linear-gradient(135deg, #0ea5e9, #22c55e); }
    .swatch-suggested { background: linear-gradient(135deg, #facc15, #fb923c); }
    .swatch-weather { background: linear-gradient(135deg, #22d3ee, #6366f1); }

    /* CALENDAR */

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1rem;
    }

    @media (max-width: 900px) {
      .calendar-grid { grid-template-columns: 1fr; }
    }

    .month-card {
      background: radial-gradient(circle at top left, #020617 0, #020617 55%, #000 100%);
      border-radius: 0.9rem;
      border: 1px solid var(--border);
      padding: 0.8rem 0.9rem 0.75rem;
      display: flex;
      flex-direction: column;
      gap: 0.55rem;
    }

    .month-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 0.4rem;
    }

    .month-title {
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.09em;
      text-transform: uppercase;
    }

    .month-subtitle {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .month-balance-pill {
      font-size: 0.75rem;
      padding: 0.18rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(34,197,94,0.55);
      background: rgba(21,128,61,0.18);
      color: #bbf7d0;
      white-space: nowrap;
    }

    .month-body {
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
    }

    .weekday-row {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      gap: 0.06rem;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      padding-bottom: 0.1rem;
    }

    .weekday-row div {
      text-align: center;
    }

    .days-grid {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      gap: 0.14rem;
    }

    .day-cell {
      min-height: 66px;
      border-radius: 0.55rem;
      border: 1px solid rgba(31,41,55,0.95);
      padding: 0.22rem 0.25rem;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      background: radial-gradient(circle at top, rgba(15,23,42,0.95) 0, #020617 70%);
      font-size: 0.85rem;
    }

    .day-empty {
      background: #020617;
      border-style: dashed;
      border-color: #020617;
    }

    .day-header-line {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.15rem;
    }

    .day-number {
      font-size: 0.95rem;
      font-weight: 600;
    }

    .day-booked {
      border-color: rgba(56,189,248,0.9);
      background: radial-gradient(circle at top, rgba(56,189,248,0.22) 0, #020617 70%);
      box-shadow:
        0 0 0 1px rgba(56,189,248,0.3),
        0 0 18px rgba(56,189,248,0.32);
    }

    .day-suggested-only {
      border-color: rgba(250,204,21,0.9);
      background: radial-gradient(circle at top, rgba(250,204,21,0.17) 0, #020617 70%);
      box-shadow:
        0 0 0 1px rgba(250,204,21,0.32),
        0 0 16px rgba(251,191,36,0.25);
    }

    .pto-block {
      line-height: 1.3;
    }

    .pto-main {
      font-weight: 600;
      font-size: 0.9rem;
    }

    .pto-sub {
      font-size: 0.75rem;
      color: #e5e7eb;
    }

    .pto-suggested {
      font-size: 0.72rem;
      color: #fef9c3;
    }

    .day-footer-line {
      margin-top: 0.1rem;
      font-size: 0.7rem;
      color: var(--muted);
    }

    .temps-strip {
      margin-top: 0.3rem;
      padding-top: 0.3rem;
      border-top: 1px dashed rgba(55,65,81,0.9);
      font-size: 0.78rem;
      color: var(--muted);
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      align-items: center;
    }

    .temps-chip {
      padding: 0.14rem 0.5rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.65);
      background: rgba(15,23,42,0.95);
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      white-space: nowrap;
    }

    .temps-chip span.label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #cbd5f5;
    }

    .temps-chip span.hi { color: #f97316; }
    .temps-chip span.lo { color: #38bdf8; }
    .temps-chip span.water { color: #22d3ee; }

    .temps-chip.excellent { border-color: rgba(52,211,153,0.85); }
    .temps-chip.good { border-color: rgba(251,191,36,0.85); }
    .temps-chip.fair { border-color: rgba(248,113,113,0.85); }

    /* SIDE PANEL */

    .side-panel {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .balance-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.3rem;
    }

    .balance-card {
      flex: 1 1 90px;
      min-width: 0;
      padding: 0.45rem 0.55rem;
      border-radius: 0.7rem;
      border: 1px solid rgba(31,41,55,0.9);
      background: radial-gradient(circle at top left, #020617 0, #020617 65%);
      cursor: pointer;
      transition: border-color 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
    }

    .balance-card:hover {
      border-color: rgba(148,163,184,0.9);
      box-shadow: 0 0 0 1px rgba(148,163,184,0.4);
    }

    .balance-card.active {
      border-color: var(--accent);
      box-shadow:
        0 0 0 1px rgba(56,189,248,0.45),
        0 16px 40px rgba(15,23,42,0.9);
      background: radial-gradient(circle at top left, rgba(37,99,235,0.3) 0, #020617 70%);
    }

    .balance-label {
      font-size: 0.7rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 0.1rem;
    }

    .balance-main {
      font-size: 1.15rem;
      font-weight: 600;
    }

    .balance-sub {
      font-size: 0.76rem;
      color: var(--muted);
    }

    .detail-panel {
      margin-top: 0.6rem;
      border-radius: 0.7rem;
      border: 1px solid rgba(31,41,55,0.9);
      background: radial-gradient(circle at top left, #020617 0, #020617 65%);
      padding: 0.55rem 0.6rem;
      font-size: 0.8rem;
    }

    .detail-title {
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 0.3rem;
    }

    .detail-tabs {
      display: flex;
      gap: 0.35rem;
      margin-bottom: 0.4rem;
      flex-wrap: wrap;
    }

    .detail-tab {
      padding: 0.14rem 0.5rem;
      border-radius: 999px;
      border: 1px solid rgba(55,65,81,0.9);
      cursor: pointer;
      font-size: 0.76rem;
      color: var(--muted);
    }

    .detail-tab.active {
      border-color: var(--accent);
      color: #e0f2fe;
      background: rgba(56,189,248,0.2);
    }

    .detail-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.78rem;
    }

    .detail-table th,
    .detail-table td {
      padding: 0.2rem 0.25rem;
      border-bottom: 1px solid rgba(31,41,55,0.9);
      text-align: right;
    }

    .detail-table th:first-child,
    .detail-table td:first-child {
      text-align: left;
    }

    .detail-table thead {
      background: rgba(15,23,42,0.9);
    }

    .detail-note {
      margin-top: 0.35rem;
      font-size: 0.74rem;
      color: var(--muted);
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <main class="card">
      <div class="card-header">
        <div class="card-header-main">
          <div class="pill pill-strong">
            <span class="pill-dot"></span>
            2026 PTO CALENDAR & TRAVERSE CITY WEEKS
          </div>
          <h1>2026 PTO & Boating Planner</h1>
          <p class="muted">
            Clear monthly calendar with PTO hours plus weekly Traverse City temps, backed by pay‚Äëperiod and monthly breakdowns.
          </p>
        </div>
        <div style="text-align:right;font-size:0.78rem;color:var(--muted);">
          <div>Interactive toggles and drill‚Äëdowns for AL, SL, and RL.</div>
          <div>All balances and weather from your 2026 tracker.</div>
        </div>
      </div>

      <div class="controls-bar">
        <button class="btn btn-toggle-on" id="togglePtoBtn">
          <span class="icon">üßæ</span><span>PTO on calendar</span>
        </button>
        <button class="btn btn-toggle-on" id="toggleSugBtn">
          <span class="icon">‚ú®</span><span>Suggested PTO</span>
        </button>
        <button class="btn btn-toggle-on" id="toggleTempBtn">
          <span class="icon">üå°Ô∏è</span><span>Weather strips</span>
        </button>
        <button class="btn btn-primary" id="scrollJulyBtn">
          <span class="icon">üìÖ</span><span>Jump to July (prime)</span>
        </button>
      </div>

      <div class="legend">
        <div class="legend-item">
          <div class="legend-swatch swatch-booked"></div>
          <span>Booked PTO (seeded AL days)</span>
        </div>
        <div class="legend-item">
          <div class="legend-swatch swatch-suggested"></div>
          <span>Suggested PTO for boating weeks</span>
        </div>
        <div class="legend-item">
          <div class="legend-swatch swatch-weather"></div>
          <span>Weekly ‚¨ÜÔ∏è/‚¨áÔ∏è temps & üåä water (May‚ÄìOct)</span>
        </div>
      </div>

      <div class="calendar-grid" id="calendarRoot"></div>
    </main>

    <aside class="side-panel">
      <section class="card">
        <div class="card-header">
          <div class="card-header-main">
            <div class="pill">
              <span class="pill-dot"></span>
              LEAVE SNAPSHOT & DRILL‚ÄëDOWN
            </div>
            <h2 style="font-size:1rem;">2026 Balances</h2>
          </div>
        </div>

        <div class="balance-cards">
          <div class="balance-card active" data-leave="AL">
            <div class="balance-label">Annual Leave</div>
            <div class="balance-main">125.2 h</div>
            <div class="balance-sub">Year end balance, lowest 53.2 h (Aug)</div>
          </div>
          <div class="balance-card" data-leave="SL">
            <div class="balance-label">Sick Leave</div>
            <div class="balance-main">158.25 h</div>
            <div class="balance-sub">No seeded SL usage in 2026</div>
          </div>
          <div class="balance-card" data-leave="RL">
            <div class="balance-label">Reward Leave</div>
            <div class="balance-main">24.0 h</div>
            <div class="balance-sub">Fixed, no accrual in 2026</div>
          </div>
        </div>

        <div class="detail-panel" id="detailPanel">
          <!-- Filled by JS -->
        </div>
      </section>
    </aside>
  </div>

  <script>
    // MONTH META (2026) [file:1]
    const monthsMeta = [
      { name: "January", index: 0, days: 31, startWeekday: 4 },
      { name: "February", index: 1, days: 28, startWeekday: 0 },
      { name: "March", index: 2, days: 31, startWeekday: 0 },
      { name: "April", index: 3, days: 30, startWeekday: 3 },
      { name: "May", index: 4, days: 31, startWeekday: 5 },
      { name: "June", index: 5, days: 30, startWeekday: 1 },
      { name: "July", index: 6, days: 31, startWeekday: 3 },
      { name: "August", index: 7, days: 31, startWeekday: 6 },
      { name: "September", index: 8, days: 30, startWeekday: 2 },
      { name: "October", index: 9, days: 31, startWeekday: 4 },
      { name: "November", index: 10, days: 30, startWeekday: 0 },
      { name: "December", index: 11, days: 31, startWeekday: 2 }
    ];

    // MONTH BALANCES (Calendar View Key) [file:1]
    const monthBalances = {
      0: { startAL: 80.5, endAL: 80.5, usedAL: 0.0, startSL: 58.25, endSL: 58.25, usedSL: 0.0 },
      1: { startAL: 80.5, endAL: 85.2, usedAL: 1.3, startSL: 58.25, endSL: 62.25, usedSL: 0.0 },
      2: { startAL: 85.2, endAL: 97.2, usedAL: 0.0, startSL: 62.25, endSL: 70.25, usedSL: 0.0 },
      3: { startAL: 97.2, endAL: 77.2, usedAL: 32.0, startSL: 70.25, endSL: 78.25, usedSL: 0.0 },
      4: { startAL: 77.2, endAL: 89.2, usedAL: 0.0, startSL: 78.25, endSL: 86.25, usedSL: 0.0 },
      5: { startAL: 89.2, endAL: 93.2, usedAL: 8.0, startSL: 86.25, endSL: 94.25, usedSL: 0.0 },
      6: { startAL: 93.2, endAL: 57.2, usedAL: 48.0, startSL: 94.25, endSL: 102.25, usedSL: 0.0 },
      7: { startAL: 57.2, endAL: 53.2, usedAL: 16.0, startSL: 102.25, endSL: 110.25, usedSL: 0.0 },
      8: { startAL: 53.2, endAL: 65.2, usedAL: 0.0, startSL: 110.25, endSL: 118.25, usedSL: 0.0 },
      9: { startAL: 65.2, endAL: 77.2, usedAL: 0.0, startSL: 118.25, endSL: 126.25, usedSL: 0.0 },
      10:{ startAL: 77.2, endAL: 89.2, usedAL: 0.0, startSL: 126.25, endSL: 134.25, usedSL: 0.0 },
      11:{ startAL: 89.2, endAL: 101.2, usedAL: 0.0, startSL: 134.25, endSL: 142.25, usedSL: 0.0 }
    };

    // PAYSTUB VIEW (condensed AL/SL/RL columns) [file:1]
    const paystubRows = [
      { date:"2026-01-02", alEarn:0, slEarn:0, alUsed:0, slUsed:0, rlUsed:0, alBal:80.5, slBal:58.25, rlBal:24 },
      { date:"2026-01-16", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:86.5, slBal:62.25, rlBal:24 },
      { date:"2026-01-30", alEarn:6, slEarn:4, alUsed:1.3, slUsed:0, rlUsed:0, alBal:91.2, slBal:66.25, rlBal:24 },
      { date:"2026-02-13", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:97.2, slBal:70.25, rlBal:24 },
      { date:"2026-02-27", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:103.2, slBal:74.25, rlBal:24 },
      { date:"2026-03-13", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:109.2, slBal:78.25, rlBal:24 },
      { date:"2026-03-27", alEarn:6, slEarn:4, alUsed:32, slUsed:0, rlUsed:0, alBal:83.2, slBal:82.25, rlBal:24 },
      { date:"2026-04-10", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:89.2, slBal:86.25, rlBal:24 },
      { date:"2026-04-24", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:95.2, slBal:90.25, rlBal:24 },
      { date:"2026-05-08", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:101.2, slBal:94.25, rlBal:24 },
      { date:"2026-05-22", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:107.2, slBal:98.25, rlBal:24 },
      { date:"2026-06-05", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:113.2, slBal:102.25, rlBal:24 },
      { date:"2026-06-19", alEarn:6, slEarn:4, alUsed:8, slUsed:0, rlUsed:0, alBal:111.2, slBal:106.25, rlBal:24 },
      { date:"2026-07-03", alEarn:6, slEarn:4, alUsed:40, slUsed:0, rlUsed:0, alBal:77.2, slBal:110.25, rlBal:24 },
      { date:"2026-07-17", alEarn:6, slEarn:4, alUsed:8, slUsed:0, rlUsed:0, alBal:75.2, slBal:114.25, rlBal:24 },
      { date:"2026-07-31", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:81.2, slBal:118.25, rlBal:24 },
      { date:"2026-08-14", alEarn:6, slEarn:4, alUsed:8, slUsed:0, rlUsed:0, alBal:79.2, slBal:122.25, rlBal:24 },
      { date:"2026-08-28", alEarn:6, slEarn:4, alUsed:8, slUsed:0, rlUsed:0, alBal:77.2, slBal:126.25, rlBal:24 },
      { date:"2026-09-11", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:83.2, slBal:130.25, rlBal:24 },
      { date:"2026-09-25", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:89.2, slBal:134.25, rlBal:24 },
      { date:"2026-10-09", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:95.2, slBal:138.25, rlBal:24 },
      { date:"2026-10-23", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:101.2, slBal:142.25, rlBal:24 },
      { date:"2026-11-06", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:107.2, slBal:146.25, rlBal:24 },
      { date:"2026-11-20", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:113.2, slBal:150.25, rlBal:24 },
      { date:"2026-12-04", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:119.2, slBal:154.25, rlBal:24 },
      { date:"2026-12-18", alEarn:6, slEarn:4, alUsed:0, slUsed:0, rlUsed:0, alBal:125.2, slBal:158.25, rlBal:24 }
    ];

    // Seeded PTO [file:1][file:2]
    const seededPto = [
      { date: "2026-02-09", type: "AL", hours: 1.3 },
      { date: "2026-04-02", type: "AL", hours: 8.0 },
      { date: "2026-04-03", type: "AL", hours: 8.0 },
      { date: "2026-04-06", type: "AL", hours: 8.0 },
      { date: "2026-04-07", type: "AL", hours: 8.0 },
      { date: "2026-06-29", type: "AL", hours: 8.0 },
      { date: "2026-07-06", type: "AL", hours: 8.0 },
      { date: "2026-07-07", type: "AL", hours: 8.0 },
      { date: "2026-07-08", type: "AL", hours: 8.0 },
      { date: "2026-07-09", type: "AL", hours: 8.0 },
      { date: "2026-07-10", type: "AL", hours: 8.0 },
      { date: "2026-07-17", type: "AL", hours: 8.0 },
      { date: "2026-08-14", type: "AL", hours: 8.0 },
      { date: "2026-08-28", type: "AL", hours: 8.0 }
    ];

    // Suggested PTO (from Suggested Days OFF) [file:1]
    const suggestedPto = [
      // Rank 1 ‚Äì Jul 20‚Äì24
      { date: "2026-07-20", type: "AL", hours: 8.0 },
      { date: "2026-07-21", type: "AL", hours: 8.0 },
      { date: "2026-07-22", type: "AL", hours: 8.0 },
      { date: "2026-07-23", type: "AL", hours: 8.0 },
      { date: "2026-07-24", type: "AL", hours: 8.0 },
      // Rank 4 ‚Äì Aug 3‚Äì7
      { date: "2026-08-03", type: "AL", hours: 8.0 },
      { date: "2026-08-04", type: "AL", hours: 8.0 },
      { date: "2026-08-05", type: "AL", hours: 8.0 },
      { date: "2026-08-06", type: "AL", hours: 8.0 },
      { date: "2026-08-07", type: "AL", hours: 8.0 },
      // Rank 5 ‚Äì Aug 10‚Äì13 (14 seeded)
      { date: "2026-08-10", type: "AL", hours: 8.0 },
      { date: "2026-08-11", type: "AL", hours: 8.0 },
      { date: "2026-08-12", type: "AL", hours: 8.0 },
      { date: "2026-08-13", type: "AL", hours: 8.0 },
      // Rank 6 ‚Äì Jun 15‚Äì19
      { date: "2026-06-15", type: "AL", hours: 8.0 },
      { date: "2026-06-16", type: "AL", hours: 8.0 },
      { date: "2026-06-17", type: "AL", hours: 8.0 },
      { date: "2026-06-18", type: "AL", hours: 8.0 },
      { date: "2026-06-19", type: "AL", hours: 8.0 },
      // Rank 8 ‚Äì Jun 26, Jun 30
      { date: "2026-06-26", type: "AL", hours: 8.0 },
      { date: "2026-06-30", type: "AL", hours: 8.0 },
      // Rank 9 ‚Äì Aug 17‚Äì21
      { date: "2026-08-17", type: "AL", hours: 8.0 },
      { date: "2026-08-18", type: "AL", hours: 8.0 },
      { date: "2026-08-19", type: "AL", hours: 8.0 },
      { date: "2026-08-20", type: "AL", hours: 8.0 },
      { date: "2026-08-21", type: "AL", hours: 8.0 },
      // Rank 10 ‚Äì Sep 7‚Äì11 (after Labor Day)
      { date: "2026-09-07", type: "AL", hours: 8.0 },
      { date: "2026-09-08", type: "AL", hours: 8.0 },
      { date: "2026-09-09", type: "AL", hours: 8.0 },
      { date: "2026-09-10", type: "AL", hours: 8.0 },
      { date: "2026-09-11", type: "AL", hours: 8.0 },
      // Rank 11 ‚Äì Aug 26‚Äì27 (28 seeded)
      { date: "2026-08-26", type: "AL", hours: 8.0 },
      { date: "2026-08-27", type: "AL", hours: 8.0 },
      // Rank 13 ‚Äì Jun 8‚Äì12
      { date: "2026-06-08", type: "AL", hours: 8.0 },
      { date: "2026-06-09", type: "AL", hours: 8.0 },
      { date: "2026-06-10", type: "AL", hours: 8.0 },
      { date: "2026-06-11", type: "AL", hours: 8.0 },
      { date: "2026-06-12", type: "AL", hours: 8.0 }
    ];

    // WEATHER WEEKS (May‚ÄìOct) [file:1]
    const weatherWeeks = [
      { month:4, label:"May 1‚Äì7",   hi:66, lo:43, water:45, q:"Fair" },
      { month:4, label:"May 8‚Äì14",  hi:67, lo:44, water:48, q:"Fair" },
      { month:4, label:"May 15‚Äì21", hi:68, lo:44, water:52, q:"Good" },
      { month:4, label:"May 22‚Äì31", hi:70, lo:46, water:55, q:"Good" },
      { month:5, label:"Jun 1‚Äì7",   hi:74, lo:50, water:58, q:"Very Good" },
      { month:5, label:"Jun 8‚Äì14",  hi:76, lo:52, water:61, q:"Very Good" },
      { month:5, label:"Jun 15‚Äì21", hi:77, lo:53, water:64, q:"Excellent" },
      { month:5, label:"Jun 22‚Äì30", hi:76, lo:53, water:67, q:"Excellent" },
      { month:6, label:"Jul 1‚Äì7",   hi:81, lo:58, water:69, q:"Excellent" },
      { month:6, label:"Jul 8‚Äì14",  hi:82, lo:59, water:71, q:"Excellent" },
      { month:6, label:"Jul 15‚Äì21", hi:82, lo:59, water:72, q:"Excellent" },
      { month:6, label:"Jul 22‚Äì31", hi:79, lo:58, water:71, q:"Excellent" },
      { month:7, label:"Aug 1‚Äì7",   hi:79, lo:58, water:70, q:"Excellent" },
      { month:7, label:"Aug 8‚Äì14",  hi:79, lo:57, water:71, q:"Excellent" },
      { month:7, label:"Aug 15‚Äì21", hi:79, lo:57, water:69, q:"Excellent" },
      { month:7, label:"Aug 22‚Äì31", hi:78, lo:56, water:67, q:"Very Good" },
      { month:8, label:"Sep 1‚Äì7",   hi:74, lo:53, water:66, q:"Very Good" },
      { month:8, label:"Sep 8‚Äì14",  hi:72, lo:52, water:65, q:"Very Good" },
      { month:8, label:"Sep 15‚Äì21", hi:71, lo:51, water:64, q:"Good" },
      { month:8, label:"Sep 22‚Äì30", hi:70, lo:50, water:62, q:"Good" },
      { month:9, label:"Oct 1‚Äì7",   hi:59, lo:42, water:61, q:"Fair" },
      { month:9, label:"Oct 8‚Äì14",  hi:58, lo:41, water:57, q:"Fair" },
      { month:9, label:"Oct 15‚Äì21", hi:57, lo:40, water:56, q:"Fair" },
      { month:9, label:"Oct 22‚Äì31", hi:55, lo:40, water:53, q:"Fair" }
    ];

    function qualityClass(q) {
      const l = q.toLowerCase();
      if (l.includes("excellent")) return "excellent";
      if (l.includes("good") && !l.includes("very")) return "good";
      if (l.includes("very")) return "excellent";
      return "fair";
    }

    const seededMap = new Map();
    seededPto.forEach(p => seededMap.set(p.date, p));

    const suggestedMap = new Map();
    suggestedPto.forEach(p => suggestedMap.set(p.date, p));

    function renderCalendar() {
      const weekdays = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
      const root = document.getElementById("calendarRoot");
      root.innerHTML = "";

      monthsMeta.forEach(m => {
        const monthCard = document.createElement("section");
        monthCard.className = "month-card";
        if (m.index === 6) monthCard.id = "month-july";

        const header = document.createElement("div");
        header.className = "month-header";

        const left = document.createElement("div");
        const title = document.createElement("div");
        title.className = "month-title";
        title.textContent = m.name.toUpperCase();
        left.appendChild(title);

        const bal = monthBalances[m.index];
        const subtitle = document.createElement("div");
        subtitle.className = "month-subtitle";
        if (bal) {
          subtitle.textContent =
            `AL ${bal.startAL.toFixed(1)} ‚Üí ${bal.endAL.toFixed(1)} (used ${bal.usedAL.toFixed(1)}h)`;
        } else {
          subtitle.textContent = "No usage summary";
        }
        left.appendChild(subtitle);

        const right = document.createElement("div");
        const balPill = document.createElement("div");
        balPill.className = "month-balance-pill";
        if (bal) {
          balPill.textContent =
            `SL ${bal.startSL.toFixed(1)} ‚Üí ${bal.endSL.toFixed(1)} ‚Ä¢ RL ${24.0.toFixed(1)}h`;
        } else {
          balPill.textContent = "SL / RL steady";
        }
        right.appendChild(balPill);

        header.appendChild(left);
        header.appendChild(right);
        monthCard.appendChild(header);

        const body = document.createElement("div");
        body.className = "month-body";

        const weekdayRow = document.createElement("div");
        weekdayRow.className = "weekday-row";
        weekdays.forEach(w => {
          const div = document.createElement("div");
          div.textContent = w;
          weekdayRow.appendChild(div);
        });
        body.appendChild(weekdayRow);

        const daysGrid = document.createElement("div");
        daysGrid.className = "days-grid";

        for (let i = 0; i < m.startWeekday; i++) {
          const empty = document.createElement("div");
          empty.className = "day-cell day-empty";
          daysGrid.appendChild(empty);
        }

        const year = 2026;
        for (let day = 1; day <= m.days; day++) {
          const cell = document.createElement("div");
          cell.className = "day-cell";

          const headerLine = document.createElement("div");
          headerLine.className = "day-header-line";

          const dayNum = document.createElement("div");
          dayNum.className = "day-number";
          dayNum.textContent = day.toString();

          headerLine.appendChild(dayNum);

          const ptoBlock = document.createElement("div");
          ptoBlock.className = "pto-block";

          const footerLine = document.createElement("div");
          footerLine.className = "day-footer-line";

          const d = new Date(year, m.index, day);
          const iso = d.toISOString().slice(0,10);
          const seeded = seededMap.get(iso);
          const suggested = suggestedMap.get(iso);

          if (seeded) {
            cell.classList.add("day-booked");
            const main = document.createElement("div");
            main.className = "pto-main";
            main.textContent = `${seeded.type} ${seeded.hours}h`;

            const sub = document.createElement("div");
            sub.className = "pto-sub";
            sub.textContent = "Booked PTO";

            ptoBlock.appendChild(main);
            ptoBlock.appendChild(sub);
          }

          if (suggested) {
            if (!seeded) {
              cell.classList.add("day-suggested-only");
            }
            const sug = document.createElement("div");
            sug.className = "pto-suggested";
            sug.textContent = `${suggested.type} ${suggested.hours}h (suggested)`;
            ptoBlock.appendChild(sug);
          }

          if (ptoBlock.childElementCount > 0) {
            cell.appendChild(headerLine);
            cell.appendChild(ptoBlock);
          } else {
            cell.appendChild(headerLine);
          }

          cell.appendChild(footerLine);
          daysGrid.appendChild(cell);
        }

        body.appendChild(daysGrid);

        // temps strip for May‚ÄìOct
        const monthWeather = weatherWeeks.filter(w => w.month === m.index);
        if (monthWeather.length) {
          const strip = document.createElement("div");
          strip.className = "temps-strip temps-strip-month";

          monthWeather.forEach(w => {
            const chip = document.createElement("div");
            chip.className = "temps-chip " + qualityClass(w.q);
            chip.innerHTML = `
              <span class="label">${w.label}</span>
              <span class="hi">‚¨ÜÔ∏è ${w.hi}¬∞F</span>
              <span class="lo">‚¨áÔ∏è ${w.lo}¬∞F</span>
              <span class="water">üåä ${w.water}¬∞F</span>
            `;
            strip.appendChild(chip);
          });

          body.appendChild(strip);
        }

        monthCard.appendChild(body);
        root.appendChild(monthCard);
      });
    }

    renderCalendar();

    // TOGGLES
    let showPto = true;
    let showSug = true;
    let showTemp = true;

    document.getElementById("togglePtoBtn").addEventListener("click", e => {
      showPto = !showPto;
      e.currentTarget.classList.toggle("btn-toggle-on", showPto);
      document.querySelectorAll(".pto-main, .pto-sub").forEach(el => {
        el.style.display = showPto ? "" : "none";
      });
    });

    document.getElementById("toggleSugBtn").addEventListener("click", e => {
      showSug = !showSug;
      e.currentTarget.classList.toggle("btn-toggle-on", showSug);
      document.querySelectorAll(".pto-suggested").forEach(el => {
        el.style.display = showSug ? "" : "none";
      });
    });

    document.getElementById("toggleTempBtn").addEventListener("click", e => {
      showTemp = !showTemp;
      e.currentTarget.classList.toggle("btn-toggle-on", showTemp);
      document.querySelectorAll(".temps-strip-month").forEach(el => {
        el.style.display = showTemp ? "flex" : "none";
      });
    });

    document.getElementById("scrollJulyBtn").addEventListener("click", () => {
      const july = document.getElementById("month-july");
      if (july) july.scrollIntoView({ behavior: "smooth", block: "start" });
    });

    // DETAIL PANEL (AL/SL/RL breakdowns)
    const detailPanel = document.getElementById("detailPanel");

    function monthName(idx) {
      return monthsMeta[idx].name;
    }

    function renderALDetail() {
      let html = `
        <div class="detail-title">Annual Leave ‚Äì Monthly & Pay‚ÄëPeriod Breakdown</div>
        <div class="detail-tabs">
          <div class="detail-tab active" data-tab="al-month">By month</div>
          <div class="detail-tab" data-tab="al-pay">By pay period</div>
        </div>
        <div id="detailContent">
      `;

      // month table
      html += `<table class="detail-table">
        <thead>
          <tr>
            <th>Month</th>
            <th>Start AL</th>
            <th>End AL</th>
            <th>AL Used</th>
          </tr>
        </thead>
        <tbody>`;
      Object.keys(monthBalances).forEach(idx => {
        const m = monthBalances[idx];
        html += `
          <tr>
            <td>${monthName(Number(idx))}</td>
            <td>${m.startAL.toFixed(1)}</td>
            <td>${m.endAL.toFixed(1)}</td>
            <td>${m.usedAL.toFixed(1)}</td>
          </tr>
        `;
      });
      html += `</tbody></table>
        <div class="detail-note">
          Pulls directly from your Calendar View Key: AL start/end and used hours per month.
        </div>
      </div>`;

      detailPanel.innerHTML = html;
      hookALTabs();
    }

    function hookALTabs() {
      const tabs = detailPanel.querySelectorAll(".detail-tab");
      const content = detailPanel.querySelector("#detailContent");

      tabs.forEach(tab => {
        tab.addEventListener("click", () => {
          tabs.forEach(t => t.classList.remove("active"));
          tab.classList.add("active");
          const which = tab.getAttribute("data-tab");

          if (which === "al-month") {
            let html = `<table class="detail-table">
              <thead>
                <tr>
                  <th>Month</th>
                  <th>Start AL</th>
                  <th>End AL</th>
                  <th>AL Used</th>
                </tr>
              </thead>
              <tbody>`;
            Object.keys(monthBalances).forEach(idx => {
              const m = monthBalances[idx];
              html += `
                <tr>
                  <td>${monthName(Number(idx))}</td>
                  <td>${m.startAL.toFixed(1)}</td>
                  <td>${m.endAL.toFixed(1)}</td>
                  <td>${m.usedAL.toFixed(1)}</td>
                </tr>`;
            });
            html += `</tbody></table>
              <div class="detail-note">
                Month‚Äëlevel rollup matching the Calendar View Key in your workbook.
              </div>`;
            content.innerHTML = html;
          } else {
            let html = `<table class="detail-table">
              <thead>
                <tr>
                  <th>Pay date</th>
                  <th>AL earned</th>
                  <th>AL used</th>
                  <th>AL balance</th>
                </tr>
              </thead>
              <tbody>`;
            paystubRows.forEach(r => {
              html += `
                <tr>
                  <td>${r.date}</td>
                  <td>${r.alEarn.toFixed(1)}</td>
                  <td>${r.alUsed.toFixed(1)}</td>
                  <td>${r.alBal.toFixed(1)}</td>
                </tr>`;
            });
            html += `</tbody></table>
              <div class="detail-note">
                Biweekly accrual and usage (6h AL per period, plus seeded usage) exactly as in Paystub View.
              </div>`;
            content.innerHTML = html;
          }
        });
      });
    }

    function renderSLDetail() {
      let html = `
        <div class="detail-title">Sick Leave ‚Äì Monthly & Pay‚ÄëPeriod Breakdown</div>
        <div class="detail-tabs">
          <div class="detail-tab active" data-tab="sl-month">By month</div>
          <div class="detail-tab" data-tab="sl-pay">By pay period</div>
        </div>
        <div id="detailContent">
      `;

      html += `<table class="detail-table">
        <thead>
          <tr>
            <th>Month</th>
            <th>Start SL</th>
            <th>End SL</th>
            <th>SL Used</th>
          </tr>
        </thead>
        <tbody>`;
      Object.keys(monthBalances).forEach(idx => {
        const m = monthBalances[idx];
        html += `
          <tr>
            <td>${monthName(Number(idx))}</td>
            <td>${m.startSL.toFixed(2)}</td>
            <td>${m.endSL.toFixed(2)}</td>
            <td>${m.usedSL.toFixed(1)}</td>
          </tr>`;
      });
      html += `</tbody></table>
        <div class="detail-note">
          SL grows by 4h each pay period in 2026 with no seeded usage.
        </div>
      </div>`;

      detailPanel.innerHTML = html;

      const tabs = detailPanel.querySelectorAll(".detail-tab");
      const content = detailPanel.querySelector("#detailContent");
      tabs.forEach(tab => {
        tab.addEventListener("click", () => {
          tabs.forEach(t => t.classList.remove("active"));
          tab.classList.add("active");
          const which = tab.getAttribute("data-tab");
          if (which === "sl-month") {
            let html = `<table class="detail-table">
              <thead>
                <tr>
                  <th>Month</th>
                  <th>Start SL</th>
                  <th>End SL</th>
                  <th>SL Used</th>
                </tr>
              </thead>
              <tbody>`;
            Object.keys(monthBalances).forEach(idx => {
              const m = monthBalances[idx];
              html += `
                <tr>
                  <td>${monthName(Number(idx))}</td>
                  <td>${m.startSL.toFixed(2)}</td>
                  <td>${m.endSL.toFixed(2)}</td>
                  <td>${m.usedSL.toFixed(1)}</td>
                </tr>`;
            });
            html += `</tbody></table>
              <div class="detail-note">
                This matches the SL columns in your Calendar View Key.
              </div>`;
            content.innerHTML = html;
          } else {
            let html = `<table class="detail-table">
              <thead>
                <tr>
                  <th>Pay date</th>
                  <th>SL earned</th>
                  <th>SL used</th>
                  <th>SL balance</th>
                </tr>
              </thead>
              <tbody>`;
            paystubRows.forEach(r => {
              html += `
                <tr>
                  <td>${r.date}</td>
                  <td>${r.slEarn.toFixed(1)}</td>
                  <td>${r.slUsed.toFixed(1)}</td>
                  <td>${r.slBal.toFixed(2)}</td>
                </tr>`;
            });
            html += `</tbody></table>
              <div class="detail-note">
                Biweekly SL accrual of 4h per period with no usage applied in 2026.
              </div>`;
            content.innerHTML = html;
          }
        });
      });
    }

    function renderRLDetail() {
      detailPanel.innerHTML = `
        <div class="detail-title">Reward Leave ‚Äì Static Balance</div>
        <p style="font-size:0.8rem;margin-bottom:0.4rem;">
          Reward Leave starts and ends at 24.0 hours in 2026 with no seeded usage in your tracker.
        </p>
        <table class="detail-table">
          <thead>
            <tr>
              <th>Period</th>
              <th>Start RL</th>
              <th>RL Used</th>
              <th>End RL</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Full year 2026</td>
              <td>24.0</td>
              <td>0.0</td>
              <td>24.0</td>
            </tr>
          </tbody>
        </table>
        <div class="detail-note">
          Once you log RL usage, this panel can be expanded to show month or pay‚Äëperiod level changes.
        </div>
      `;
    }

    function setActiveLeave(leave) {
      document.querySelectorAll(".balance-card").forEach(card => {
        card.classList.toggle("active", card.getAttribute("data-leave") === leave);
      });
      if (leave === "AL") renderALDetail();
      else if (leave === "SL") renderSLDetail();
      else renderRLDetail();
    }

    document.querySelectorAll(".balance-card").forEach(card => {
      card.addEventListener("click", () => {
        setActiveLeave(card.getAttribute("data-leave"));
      });
    });

    // default view: AL
    setActiveLeave("AL");
  </script>
</body>
</html>
